clc,clear
% xzaosheng=[71.1 72.4 72.4 72.1 71.4 72.0 71.6]';%注意这里为列向量
% x24=[0.161 0.423 0.188 0.426 0.380 0.395 0.280 0.439]';
% x26=[0.175 0.424 0.220 0.406 0.349 0.429 0.272 0.465]';
% x27=[0.171 0.403 0.218 0.298 0.364 0.405 0.288 0.448]';
% x41=[0.333 0.414 0.222 0.386 0.379 0.433 0.268 0.426]';
% x42=[0.184 0.414 0.224 0.582 0.410 0.387 0.304 0.402]';
% x43=[0.160 0.409 0.222 0.460 0.385 0.428 0.290 0.434]';
% x45=[0.180 0.420 0.218 0.385 0.391 0.417 0.273 0.407]';
% x46=[0.175 0.399 0.221 0.407 0.355 0.425 0.282 0.379]';
% x52=[0.184 0.411 0.699 0.820 0.384 0.407 0.500 0.434]';
% x53=[0.178 0.411 0.216 0.373 0.346 0.403 0.273 0.413]';
% x55=[0.179 0.414 0.218 0.352 0.366 0.395 0.245 0.424]';
% x56=[0.211 0.430 0.219 0.409 0.388 0.403 0.289 0.356]';
% x60=[0.177 0.417 0.222 0.406 0.371 0.405 0.317 0.431]';
% x69=[0.182 0.435 0.215 0.407 0.389 0.387 0.122 0.099]';

x0=load('y.txt');
x0
x0=x0'
x0=x0+5;
n=length(x0);
lamda=x0(1:n-1)./x0(2:n)%计算级比
range=minmax(lamda')%计算级比的范围
shangxian=exp(2/12)
xiaxian=exp(-2/11)
x1=cumsum(x0)%累加运算
B=[-0.5*(x1(1:n-1)+x1(2:n)),ones(n-1,1)];
Y=x0(2:n);
u=B\Y%拟合参数u(1)=a,u(2)=b
syms x(t)
x=dsolve(diff(x)+u(1)*x==u(2),x(0)==x0(1));%求微分方程的符号解
xt=vpa(x,6)%以小数格式显示微分方程的解
yuce1=subs(x,t,[0:n+1])%求已知数据的预测值
yuce1=double(yuce1)%符号数转换成数值类型，否则无法做差分运算

yuce=[x0(1),diff(yuce1)]%差分运算，还原数据
yuce=yuce-5
x0=x0-5;
x0'
xlswrite('yuce30.xls',yuce)
% epsilon=x0'-yuce%计算残差
% delta=abs(epsilon./x0')%计算相对误差
% rho=1-(1-0.5*u(1))/(1+0.5*u(1))*lamda'%计算级比偏差值，u(1)=a
%bar(delta),title('相对误差(ID=24)');%相对误差画图